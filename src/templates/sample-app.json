{
    "module": {
        "#APP-NAME#": {
            "source": "./modules/application",
            "app_name": "#APP-NAME#",
            "app_docker_image": "${var.DOCKER_REGISTRY_NAMESPACE}/#IMAGE-NAME#:#IMAGE-TAG#",
            "docker_registry_username": "${var.DOCKER_REGISTRY_USERNAME}",
            "docker_registry_password": "${var.DOCKER_REGISTRY_PASSWORD}",
            "app_memory": "${var.memory}",
            "app_disk_quota": "${var.disk_quota}",
            "space_name": "${var.CLOUD_FOUNDRY_SPACE}",
            "app_hostname": "#APP-NAME#-${var.CLOUD_FOUNDRY_ORG}-${var.CLOUD_FOUNDRY_SPACE}",
            "app_domain": [
                "${var.CLOUD_FOUNDRY_EXTERNAL_DOMAIN}"
            ],
            "app_ports": [
                8080
            ],
            "app_services": {
                "postgres": "postgreskey",
                "rabbitmq": "rabbitmqkey"
            },
            "cups_services": [
                "ngcap_log_drainer"
            ],
            "app_environment": {
                "rabbitmq.Hostname": "${module.#APP-NAME#.service_key_credentials.rabbitmqkey.hostname}",
                "rabbitmq.Username": "${module.#APP-NAME#.service_key_credentials.rabbitmqkey.admin_username}",
                "rabbitmq.Password": "${module.#APP-NAME#.service_key_credentials.rabbitmqkey.admin_password}",
                "rabbitmq.VirtualHost": "vhost",
                "rabbitmq.Port": "${module.#APP-NAME#.service_key_credentials.rabbitmqkey.port}",
                "postgres.DbHost": "${module.#APP-NAME#.service_key_credentials.postgreskey.hostname}",
                "postgres.Username": "${module.#APP-NAME#.service_key_credentials.postgreskey.username}",
                "postgres.Password": "${module.#APP-NAME#.service_key_credentials.postgreskey.password}",
                "postgres.Port": "${module.#APP-NAME#.service_key_credentials.postgreskey.port}",
                "supportDB.DbHost": "${module.#APP-NAME#.service_key_credentials.postgreskey.hostname}",
                "supportDB.Username": "${module.#APP-NAME#.service_key_credentials.postgreskey.username}",
                "supportDB.Password": "${module.#APP-NAME#.service_key_credentials.postgreskey.password}",
                "supportDB.Port": "${module.#APP-NAME#.service_key_credentials.postgreskey.port}",
                "supportArchiveDB.DbHost": "${module.#APP-NAME#.service_key_credentials.postgreskey.hostname}",
                "supportArchiveDB.Username": "${module.#APP-NAME#.service_key_credentials.postgreskey.username}",
                "supportArchiveDB.Password": "${module.#APP-NAME#.service_key_credentials.postgreskey.password}",
                "supportArchiveDB.Port": "${module.#APP-NAME#.service_key_credentials.postgreskey.port}",
                "archiveDB.DbHost": "${module.#APP-NAME#.service_key_credentials.postgreskey.hostname}",
                "archiveDB.Username": "${module.#APP-NAME#.service_key_credentials.postgreskey.username}",
                "archiveDB.Password": "${module.#APP-NAME#.service_key_credentials.postgreskey.password}",
                "archiveDB.Port": "${module.#APP-NAME#.service_key_credentials.postgreskey.port}"
            },
            "app_stopped": "${var.stop_apps}"
        }
    }
}